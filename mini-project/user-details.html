<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>User details</title>
</head>
<body>
<div class="ss"></div>
<script>
    //На странице user-details.html:
    // 4 Вивести всю, без виключення, інформацію про об'єкт user на який клікнули
    // 5 Додати кнопку "post of current user", при кліку на яку, з'являються title всіх постів поточного юзера
    //(для получения постов используйте эндпоинт https://jsonplaceholder.typicode.com/users/USER_ID/posts)
    //6 Каждому посту додати кнопку/посилання, при кліку на яку відбувається перехід на сторінку post-details.html, котра має детальну інфу про поточний пост.


    let url = new URL(location.href)
    let id = url.searchParams.get('data')
    let mainDiv = document.querySelector('.ss')
    fetch(`https://jsonplaceholder.typicode.com/users/${id}`)
        .then(value => value.json())
        .then(userDetails => {
            for (const userDetail in userDetails) {

                let userDiv = document.createElement('div')

                if (typeof userDetails[userDetail] !== 'object') {
                    userDiv.innerText = `${userDetail} ${userDetails[userDetail]}`
                } else {
                    userDiv.innerText = `${userDetail}`


                    for (const item in userDetails[userDetail]) {
                        let userInnerDiv = document.createElement('div')

                        if (typeof userDetails[userDetail][item] !== 'object') {
                            userInnerDiv.innerText = `${item} ${userDetails[userDetail][item]}`
                        } else {
                            userInnerDiv.innerText = `${item}`

                            for (const xx in userDetails[userDetail][item]) {
                                let divInDiv = document.createElement('div')


                                if (typeof userDetails[userDetail][item][xx] !== 'object') {
                                    divInDiv.innerText = `${xx} ${userDetails[userDetail][item][xx]}`
                                }userInnerDiv.appendChild(divInDiv)
                            }
                        }
                        userDiv.appendChild(userInnerDiv)
                    }
                }mainDiv.appendChild(userDiv)
            }
            let button = document.createElement('button')
            mainDiv.appendChild(button)
            let linkForPosts = document.createElement('a')
            linkForPosts.innerText = 'post of current user'
            fetch(`https://jsonplaceholder.typicode.com/users/${id}/posts`)//
                .then(value => value.json())
                .then(posts => {
                    linkForPosts.onclick = function () {
                        for (const post of posts) {
                            let  divWithPosts = document.createElement('div')
                                divWithPosts.innerText = `${post.id}-${post.title}---${post.body}`
                                mainDiv.appendChild(divWithPosts)


                                let comments = document.createElement('button')
                                let linkToComments = document.createElement('a')
                                linkToComments.innerText = 'info about post'
                                linkToComments.href = `post-details.html?number=${post.id}`
                                comments.appendChild(linkToComments)
                                divWithPosts.appendChild(comments)

                        }
                    }
            })

            button.appendChild(linkForPosts)
     })

</script>

</body>
</html>